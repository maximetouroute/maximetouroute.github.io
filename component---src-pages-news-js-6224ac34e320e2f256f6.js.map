{"version":3,"sources":["webpack:///./src/pages/news.js"],"names":["News","orderedEvents","data","allIcal","edges","sort","a","b","Date","node","start","getTime","today","pastEvents","filter","end","presentEvents","futureEvents","eventMaker","event","startDate","toISOString","substring","endDate","dates","urlRegex","description","replace","_","descWithNoUrls","formattedDescription","split","map","part","urls","match","style","lineHeight","marginBottom","key","summary","className","location","url","display","maxWidth","overflowWrap","href","titleStyle","textAlign","marginTop","borderLeft","paddingLeft","title","itemProp","color","length","id","onClick","document","getElementById","to","newsQuery"],"mappings":"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","file":"component---src-pages-news-js-6224ac34e320e2f256f6.js","sourcesContent":["import React from 'react'\nimport { Link, graphql } from 'gatsby'\nimport MainLayout from '../layout/MainLayout'\nimport MetaTags from '../bits/MetaTags/MetaTags'\nimport './../layout/Layouts.scss'\nimport './news.scss'\n\nexport default function News({ data }) {\n  const { edges: events } = data.allIcal\n  // Newest to oldest\n  const orderedEvents = events.sort((a, b) => {\n    return new Date(b.node.start).getTime() - new Date(a.node.start).getTime()\n  })\n\n  const today = new Date()\n  const pastEvents = orderedEvents.filter(({ node }) => {\n    return new Date(node.end) < today\n  })\n  const presentEvents = orderedEvents.filter(({ node }) => {\n    return (new Date(node.start) <= today) & (today <= new Date(node.end))\n  })\n  const futureEvents = orderedEvents.filter(({ node }) => {\n    return today < new Date(node.start)\n  })\n\n  const eventMaker = (event) => {\n    const startDate = new Date(event.start).toISOString().substring(0, 10)\n    const endDate = new Date(event.end).toISOString().substring(0, 10)\n    const dates =\n      startDate === endDate ? `${startDate}` : `${startDate} â†’ ${endDate}`\n    const urlRegex = /(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/gi\n    const htmlTagsAndTheirContentRegex = /<\\/?[^>]+(>|$)/g ///<[^>]*>/ ;///(<([^>]+)>.*<([^>]+)>)/;\n\n    // Clean possible presence of useless html tags from google calendar\n    event.description = event.description.replace(\n      htmlTagsAndTheirContentRegex,\n      (_) => {\n        return ''\n      }\n    )\n    // Stuff like &amp; and other html codes\n    event.description = event.description.replace(/&.*;/g, (_) => {\n      return ''\n    })\n    // Remove all dirty formatting from google calendar mess\n    event.description = event.description.replace('\\n', (_) => {\n      return ''\n    })\n    // Deode customely encoded break lines\n    const descWithNoUrls = event.description.replace(urlRegex, () => {\n      return ''\n    })\n\n    const formattedDescription = (\n      <>\n        {descWithNoUrls.split(/BR/g).map((part) => {\n          return (\n            <>\n              {part}\n              <br />\n            </>\n          )\n        })}\n      </>\n    )\n    const urls = event.description.match(urlRegex) || []\n\n    return (\n      <div\n        style={{ lineHeight: 1.5, marginBottom: '2em' }}\n        key={event.summary}\n        className={'newsCard'}\n      >\n        <h3 style={{ marginBottom: '0.5em' }}>{event.summary}</h3>\n        <div>\n          <strong>{dates}</strong>\n        </div>\n        {event.location && <div>Location: {event.location}</div>}\n        <p>\n          {formattedDescription}\n          {urls.map((url) => (\n            <>\n              <div\n                style={{\n                  display: 'inline-block',\n                  maxWidth: '90vw',\n                  overflowWrap: 'break-word',\n                }}\n              >\n                <a href={url}>{url}</a>\n              </div>\n              <br />\n            </>\n          ))}\n        </p>\n      </div>\n    )\n  }\n\n  const titleStyle = {\n    textAlign: '',\n    marginTop: '2em',\n    marginBottom: '2em',\n    borderLeft: '5px solid #bfceee',\n    paddingLeft: '0.5em',\n  }\n  return (\n    <MainLayout>\n      <MetaTags title={'News'} />\n      <div className=\"Page\">\n        <article className=\"card article\">\n          <br />\n          <br />\n          <br />\n          <div className=\"content\" itemProp=\"articleBody\">\n            <h2 style={{ ...titleStyle, color: '#3568cf' }}>\n              Currently Happening\n            </h2>\n            {presentEvents.length === 0 && (\n              <p>Nothing is happening right now</p>\n            )}\n            {presentEvents.map(({ node }) => {\n              return eventMaker(node)\n            })}\n            <h2 style={{ ...titleStyle, color: '#3568cf' }}>Upcoming Events</h2>\n            {futureEvents.length === 0 && (\n              <p>There is nothing publicly planned right now</p>\n            )}\n            {futureEvents.map(({ node }) => {\n              return eventMaker(node)\n            })}\n\n            <button\n              id=\"showAllEventsButton\"\n              className=\"showmoreButton\"\n              onClick={() => {\n                let t = document.getElementById('pastEvents')\n                t.style.display = ''\n                let d = document.getElementById('showAllEventsButton')\n                d.style.display = 'none'\n              }}\n              style={{ marginTop: '4rem', marginBottom: '4rem' }}\n            >\n              Show past events\n            </button>\n            <div id=\"pastEvents\" style={{ display: 'none' }}>\n              <h2 style={titleStyle}>Past Events</h2>\n              {pastEvents.map(({ node }) => {\n                return eventMaker(node)\n              })}\n            </div>\n          </div>\n          <br />\n          <br />\n          <Link to=\"/\">Go Home</Link>\n        </article>\n      </div>\n    </MainLayout>\n  )\n}\n\nexport const newsQuery = graphql`\n  query NewsQuery {\n    allIcal {\n      edges {\n        node {\n          start\n          end\n          summary\n          description\n          location\n        }\n      }\n    }\n  }\n`\n"],"sourceRoot":""}